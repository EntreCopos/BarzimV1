'use client'
import styles from './box-review-avaliada.module.css'
import Confetti from 'react-confetti'
import { useEffect, useRef, useState } from 'react'
import { cn } from '@/lib/utils'

interface BoxReviewAvaliadaProps {
  beerName: string
  children: React.ReactNode
}

const BoxReviewAvaliada: React.FC<BoxReviewAvaliadaProps> = ({
  beerName,
  children,
}) => {
  const currentRef = useRef<HTMLDivElement>(null)
  const [currentSize, setCurrentSize] = useState({ width: 0, height: 0 })

  useEffect(() => {
    if (currentRef.current) {
      const { width, height } = currentRef.current!.getBoundingClientRect()
      setCurrentSize({ width, height })
    }
  }, [])

  return (
    <div
      ref={currentRef}
      className={cn(
        styles.boxReviewAvaliadaContainer,
        'text-secondary-foreground'
      )}
    >
      <Confetti width={currentSize.width} height={currentSize.height} />
      <SuccessIcon />
      <h2 className="text-3xl font-semibold">Parabéns!</h2>
      <p className="text-lg">
        Você avaliou <span className={styles.cervejaText}>{beerName}</span>
      </p>
      <p className="text-lg">
        O Barzim é melhor graças a você.
        <br /> Compartilhe com seus amigos e ajude a espalhar a palavra do
        Barzim.
      </p>
      {children}
    </div>
  )
}

const SuccessIcon = () => (
  <svg
    width="140"
    height="140"
    viewBox="0 0 140 140"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <rect width="140" height="140" rx="70" fill="#FEC435" fillOpacity="1" />
    <path
      d="M62.5481 45.3126C62.2262 45.3124 61.9052 45.2788 61.5902 45.2126L55.4684 43.9267C54.8658 43.8007 54.294 43.5572 53.7855 43.2103C53.2771 42.8633 52.8419 42.4196 52.505 41.9044C52.168 41.3893 51.9358 40.8128 51.8216 40.2079C51.7074 39.603 51.7135 38.9816 51.8395 38.379C51.9654 37.7765 52.2089 37.2046 52.5559 36.6962C52.9028 36.1877 53.3466 35.7526 53.8617 35.4156C54.3769 35.0786 54.9533 34.8464 55.5582 34.7322C56.1631 34.618 56.7846 34.6241 57.3871 34.7501L63.5059 36.0282C64.6417 36.2648 65.6495 36.9141 66.3343 37.8507C67.0191 38.7873 67.3321 39.9446 67.213 41.0987C67.0938 42.2528 66.5509 43.3217 65.6892 44.0987C64.8275 44.8756 63.7083 45.3053 62.5481 45.3048V45.3126ZM62.2277 42.1548C62.6332 42.2364 63.0544 42.155 63.4003 41.9284C63.7462 41.7018 63.989 41.3481 64.0762 40.9439C64.1183 40.743 64.1204 40.5358 64.0824 40.3341C64.0444 40.1323 63.9671 39.9401 63.8548 39.7683C63.7425 39.5965 63.5974 39.4485 63.4279 39.3328C63.2584 39.2171 63.0677 39.1359 62.8668 39.0939L56.7481 37.8126C56.5471 37.7708 56.3398 37.7689 56.1381 37.8072C55.9364 37.8455 55.7442 37.9232 55.5726 38.0358C55.4009 38.1484 55.2531 38.2937 55.1376 38.4635C55.0222 38.6332 54.9413 38.8241 54.8996 39.0251C54.815 39.4306 54.8949 39.8531 55.1217 40.1997C55.3485 40.5463 55.7036 40.7887 56.109 40.8735L62.2277 42.1517V42.1548Z"
      fill="#141414"
    />
    <path
      d="M76.1474 35.9219C74.9976 35.9211 73.8882 35.4978 73.0301 34.7324C72.1721 33.9671 71.6253 32.913 71.4937 31.7708C71.3621 30.6285 71.655 29.4777 72.3165 28.5373C72.9781 27.5969 73.9622 26.9324 75.0818 26.6703L81.1661 25.2391C81.7686 25.0887 82.3948 25.0596 83.0086 25.1533C83.6224 25.247 84.2114 25.4618 84.7415 25.785C85.2716 26.1083 85.7322 26.5336 86.0965 27.0364C86.4609 27.5391 86.7217 28.1092 86.8639 28.7136C87.0061 29.318 87.0268 29.9446 86.9248 30.557C86.8229 31.1695 86.6002 31.7555 86.2699 32.2812C85.9395 32.8069 85.508 33.2618 85.0004 33.6193C84.4928 33.9769 83.9193 34.23 83.313 34.3641L77.2286 35.7953C76.8743 35.879 76.5115 35.9214 76.1474 35.9219ZM82.2411 28.2375C82.1179 28.237 81.9951 28.2517 81.8755 28.2812L75.7911 29.7125C75.4903 29.7829 75.2171 29.9409 75.0061 30.1665C74.795 30.3922 74.6556 30.6753 74.6055 30.9802C74.5553 31.285 74.5966 31.5979 74.7242 31.8793C74.8518 32.1606 75.06 32.3978 75.3224 32.5609C75.4961 32.6705 75.69 32.744 75.8927 32.777C76.0954 32.81 76.3026 32.8019 76.5021 32.7531L82.5865 31.3219C82.9601 31.235 83.2887 31.0136 83.5097 30.7001C83.7307 30.3865 83.8286 30.0026 83.7847 29.6215C83.7409 29.2404 83.5584 28.8887 83.272 28.6335C82.9857 28.3783 82.6154 28.2373 82.2318 28.2375H82.2411Z"
      fill="#141414"
    />
    <path
      d="M61.6681 69.2565C62.101 67.9379 62.4558 66.5949 62.7306 65.2346C63.3241 60.2267 63.6558 55.1912 63.7243 50.1487C63.7317 49.7831 63.6107 49.4266 63.3823 49.1411C63.1539 48.8556 62.8326 48.6592 62.4743 48.5862L53.2962 46.669C52.939 46.5947 52.567 46.6477 52.2448 46.819C51.9226 46.9902 51.6705 47.2688 51.5322 47.6065C49.5777 52.2537 47.867 56.9997 46.4072 61.8252C46.1176 63.1825 45.9089 64.5557 45.7822 65.9377C43.8532 66.4442 42.1034 67.4776 40.7285 68.9222C39.3537 70.3669 38.4081 72.1658 37.9978 74.1174L36.1462 82.9877C36.0616 83.3932 36.1415 83.8157 36.3683 84.1623C36.5951 84.5089 36.9502 84.7513 37.3556 84.8362L43.4743 86.1127C43.675 86.1559 43.8823 86.1586 44.084 86.1208C44.2858 86.083 44.4779 86.0053 44.6493 85.8924C44.996 85.6647 45.2387 85.3092 45.3243 84.9033C45.5154 83.7365 46.0998 82.6702 46.9806 81.8815C47.5423 81.4961 48.1831 81.2414 48.856 81.1359C49.529 81.0305 50.217 81.077 50.8697 81.2721C51.5068 81.3248 52.1234 81.5221 52.6728 81.849C53.2221 82.176 53.6897 82.6239 54.0398 83.1588C54.39 83.6936 54.6135 84.3013 54.6934 84.9356C54.7733 85.5698 54.7075 86.214 54.5009 86.819C54.4168 87.2242 54.4969 87.6463 54.7236 87.9925C54.9503 88.3388 55.3052 88.5809 55.7103 88.6658L61.829 89.944C62.0299 89.9858 62.2371 89.9877 62.4387 89.9495C62.6403 89.9113 62.8324 89.8338 63.0041 89.7213C63.1757 89.6089 63.3235 89.4637 63.4391 89.2942C63.5546 89.1246 63.6356 88.9339 63.6775 88.733L65.529 79.8612C65.9323 77.9094 65.7847 75.8839 65.1029 74.0111C64.421 72.1384 63.2318 70.4921 61.6681 69.2565Z"
      fill="#141414"
    />
    <path
      d="M59.9124 99.1267L53.7936 97.8486C53.5927 97.8067 53.3856 97.8049 53.184 97.8431C52.9823 97.8813 52.7902 97.9588 52.6186 98.0712C52.4469 98.1837 52.2991 98.3288 52.1836 98.4984C52.068 98.668 51.987 98.8587 51.9452 99.0595C51.7521 100.226 51.1673 101.291 50.2874 102.08C49.7264 102.466 49.0859 102.722 48.413 102.827C47.7401 102.933 47.0521 102.885 46.3999 102.689C45.7234 102.608 45.0738 102.376 44.4991 102.01C43.9244 101.644 43.4392 101.154 43.0796 100.575C42.5862 99.4986 42.4759 98.2856 42.7671 97.1377C42.8089 96.9368 42.8108 96.7296 42.7726 96.528C42.7344 96.3264 42.6569 96.1343 42.5444 95.9626C42.432 95.791 42.2868 95.6432 42.1172 95.5276C41.9477 95.4121 41.757 95.3311 41.5561 95.2892L35.4389 94.0127C35.2379 93.9706 35.0306 93.9685 34.8288 94.0066C34.627 94.0447 34.4347 94.1222 34.2629 94.2347C34.0911 94.3471 33.9431 94.4924 33.8275 94.662C33.7118 94.8317 33.6308 95.0226 33.5889 95.2236L31.0358 107.464C30.7826 108.681 31.0231 109.949 31.7043 110.988C32.3856 112.028 33.4518 112.754 34.6686 113.008L53.0233 116.841C53.3409 116.907 53.6645 116.941 53.9889 116.941C55.0645 116.939 56.1066 116.567 56.9405 115.887C57.7743 115.208 58.3492 114.263 58.5686 113.21L61.1233 100.974C61.2074 100.568 61.1271 100.146 60.9 99.7996C60.673 99.4533 60.3177 99.2113 59.9124 99.1267Z"
      fill="#141414"
    />
    <path
      d="M109.343 97.2641L106.48 85.0953C106.386 84.6926 106.135 84.3439 105.784 84.1257C105.432 83.9074 105.008 83.8375 104.605 83.9313L98.5211 85.3625C98.1184 85.4573 97.7697 85.7079 97.5514 86.0594C97.3332 86.4108 97.2633 86.8345 97.357 87.2375C97.5789 87.8371 97.6611 88.4793 97.5974 89.1154C97.5337 89.7515 97.3256 90.3647 96.9892 90.9083C96.6528 91.4519 96.1968 91.9116 95.6559 92.2524C95.115 92.5932 94.5036 92.8061 93.868 92.875C93.2202 93.0882 92.5328 93.153 91.8567 93.0646C91.1805 92.9761 90.5329 92.7367 89.9617 92.3641C89.0616 91.5972 88.4503 90.546 88.2289 89.3844C88.1338 88.9819 87.8831 88.6336 87.5316 88.4157C87.1802 88.1978 86.7567 88.1281 86.3539 88.2219L80.2711 89.6531C79.8684 89.7479 79.5197 89.9985 79.3014 90.35C79.0832 90.7015 79.0133 91.1252 79.107 91.5281L81.9695 103.695C82.2103 104.723 82.791 105.64 83.6176 106.297C84.4443 106.953 85.4684 107.312 86.5242 107.314C86.8883 107.313 87.251 107.27 87.6055 107.188L105.857 102.894C107.065 102.608 108.111 101.855 108.764 100.8C109.418 99.7443 109.626 98.4728 109.343 97.2641Z"
      fill="#141414"
    />
    <path
      d="M85.3666 77.2201C85.1447 76.6206 85.0625 75.9785 85.1262 75.3424C85.1899 74.7064 85.398 74.0933 85.7344 73.5498C86.0709 73.0063 86.5269 72.5468 87.0678 72.2062C87.6087 71.8655 88.2201 71.6528 88.8557 71.5841C89.4551 71.3626 90.0972 71.2806 90.7331 71.3445C91.369 71.4083 91.982 71.6164 92.5254 71.9528C93.0688 72.2892 93.5283 72.7451 93.869 73.2858C94.2097 73.8265 94.4227 74.4378 94.4916 75.0732C94.5863 75.4759 94.8369 75.8247 95.1884 76.0429C95.5399 76.2611 95.9636 76.331 96.3666 76.2373L102.451 74.806C102.854 74.7113 103.202 74.4607 103.421 74.1092C103.639 73.7577 103.709 73.334 103.615 72.931L101.538 64.1107C101.079 62.1701 100.088 60.3957 98.6778 58.9861C97.2671 57.5766 95.4919 56.5874 93.551 56.1295C93.3862 54.7498 93.1394 53.3813 92.8119 52.031C91.2349 47.2424 89.4096 42.5391 87.3432 37.9404C87.1963 37.6064 86.9371 37.3343 86.6106 37.1713C86.2841 37.0083 85.9109 36.9648 85.5557 37.0482L76.4291 39.1951C76.0735 39.2787 75.7585 39.4842 75.5387 39.7759C75.3189 40.0676 75.2082 40.4271 75.226 40.792C75.4214 45.8307 75.8804 50.8558 76.601 55.8466C76.9099 57.2002 77.2986 58.5343 77.765 59.842C76.2322 61.1171 75.0843 62.7935 74.4497 64.6837C73.815 66.5738 73.7186 68.6033 74.1713 70.5451L76.2463 79.3654C76.341 79.7681 76.5916 80.1168 76.9431 80.3351C77.2946 80.5533 77.7183 80.6232 78.1213 80.5295L84.2041 79.0982C84.6072 79.0032 84.9561 78.7519 85.1741 78.3998C85.3921 78.0476 85.4613 77.6233 85.3666 77.2201Z"
      fill="#141414"
    />
    <path
      d="M60.7496 96.6796C60.6446 96.679 60.5399 96.668 60.4371 96.6468C60.2362 96.605 60.0455 96.524 59.8759 96.4084C59.7064 96.2929 59.5612 96.145 59.4488 95.9734C59.3363 95.8018 59.2588 95.6096 59.2206 95.408C59.1824 95.2064 59.1843 94.9993 59.2261 94.7984L60.3058 89.6281L55.7167 88.6687C55.3117 88.5838 54.9568 88.3416 54.7301 87.9954C54.5033 87.6491 54.4232 87.2271 54.5074 86.8218C54.7139 86.2168 54.7798 85.5727 54.6999 84.9384C54.62 84.3042 54.3964 83.6965 54.0463 83.1616C53.6961 82.6268 53.2286 82.1788 52.6793 81.8519C52.1299 81.525 51.5132 81.3276 50.8761 81.2749C50.2236 81.079 49.5354 81.032 48.8623 81.1374C48.1892 81.2429 47.5484 81.4981 46.9871 81.8843C46.1069 82.6735 45.5225 83.7396 45.3308 84.9062C45.2888 85.1071 45.2076 85.2978 45.0919 85.4673C44.9762 85.6368 44.8282 85.7818 44.6564 85.8942C44.4846 86.0065 44.2923 86.0838 44.0906 86.1218C43.8889 86.1598 43.6817 86.1577 43.4808 86.1156L37.3543 84.8437C37.1489 84.8065 36.953 84.7285 36.7783 84.6144C36.6036 84.5002 36.4535 84.3522 36.3369 84.1791C36.2203 84.006 36.1395 83.8113 36.0994 83.6065C36.0593 83.4017 36.0607 83.1909 36.1034 82.9866C36.1461 82.7823 36.2292 82.5886 36.348 82.417C36.4668 82.2454 36.6188 82.0993 36.7949 81.9874C36.9711 81.8755 37.1679 81.8 37.3737 81.7654C37.5796 81.7307 37.7902 81.7377 37.9933 81.7859L42.6964 82.7671C43.1596 81.4653 43.9701 80.3149 45.0402 79.4406C45.9549 78.7586 47.0132 78.2944 48.1345 78.0832C49.2557 77.872 50.4103 77.9194 51.5105 78.2218C53.35 78.4337 55.0336 79.3566 56.2015 80.7935C57.3694 82.2303 57.9289 84.0669 57.7605 85.9109L62.4683 86.8937C62.8734 86.9786 63.2283 87.2207 63.455 87.567C63.6817 87.9133 63.7618 88.3353 63.6777 88.7406L62.2792 95.4406C62.2051 95.7912 62.0126 96.1057 61.7341 96.3313C61.4556 96.5569 61.108 96.6799 60.7496 96.6796Z"
      fill="#141414"
    />
    <path
      d="M47.8716 105.978C47.1614 105.974 46.4535 105.896 45.7591 105.747C44.6293 105.585 43.5514 105.167 42.6074 104.525C41.6635 103.884 40.8785 103.035 40.3123 102.044C39.6829 100.814 39.4009 99.436 39.4966 98.0579L34.7951 97.075C34.3914 96.9884 34.0385 96.7455 33.8133 96.3995C33.5882 96.0534 33.5092 95.6323 33.5935 95.2282L34.7419 89.7282C34.8265 89.3225 35.0687 88.967 35.4154 88.7399C35.762 88.5128 36.1847 88.4327 36.5904 88.5172C36.9961 88.6018 37.3516 88.844 37.5787 89.1907C37.8058 89.5373 37.8859 89.96 37.8013 90.3657L36.9716 94.336L41.5607 95.2938C41.7616 95.3357 41.9522 95.4167 42.1218 95.5322C42.2914 95.6478 42.4366 95.7956 42.549 95.9672C42.6614 96.1389 42.739 96.331 42.7772 96.5326C42.8154 96.7342 42.8135 96.9414 42.7716 97.1422C42.4805 98.2902 42.5908 99.5031 43.0841 100.58C43.4445 101.158 43.9301 101.647 44.5051 102.012C45.08 102.377 45.7297 102.609 46.406 102.689C47.0109 102.897 47.6551 102.963 48.2896 102.884C48.9242 102.804 49.5321 102.581 50.0672 102.231C50.6023 101.881 51.0503 101.413 51.3771 100.863C51.7039 100.314 51.9009 99.6968 51.9529 99.0594C51.9947 98.8585 52.0757 98.6679 52.1913 98.4983C52.3068 98.3287 52.4546 98.1836 52.6263 98.0711C52.7979 97.9587 52.9901 97.8811 53.1917 97.8429C53.3933 97.8047 53.6004 97.8066 53.8013 97.8485L59.9201 99.1266C60.126 99.1631 60.3226 99.2405 60.4981 99.3544C60.6736 99.4682 60.8244 99.6161 60.9417 99.7893C61.059 99.9626 61.1402 100.158 61.1807 100.363C61.2212 100.568 61.2201 100.779 61.1774 100.984C61.1347 101.189 61.0513 101.383 60.9322 101.555C60.8131 101.727 60.6606 101.873 60.4839 101.985C60.3072 102.097 60.1098 102.172 59.9035 102.207C59.6971 102.241 59.486 102.233 59.2826 102.184L54.5748 101.202C54.119 102.612 53.221 103.839 52.0136 104.699C50.8063 105.559 49.3539 106.008 47.8716 105.978Z"
      fill="#141414"
    />
    <path
      d="M103.57 81.1139C103.218 81.1134 102.876 80.9942 102.601 80.7756C102.325 80.557 102.131 80.2517 102.051 79.9093L100.937 75.1639L96.3743 76.2374C95.9714 76.3311 95.5477 76.2612 95.1962 76.043C94.8447 75.8248 94.5941 75.4761 94.4993 75.0733C94.4304 74.4379 94.2175 73.8267 93.8768 73.2859C93.5361 72.7452 93.0765 72.2893 92.5331 71.9529C91.9897 71.6165 91.3768 71.4085 90.7409 71.3446C90.105 71.2807 89.4629 71.3627 88.8634 71.5843C88.2281 71.653 87.6168 71.8657 87.0761 72.2062C86.5353 72.5468 86.0794 73.0061 85.743 73.5494C85.4066 74.0927 85.1985 74.7056 85.1346 75.3414C85.0707 75.9773 85.1527 76.6193 85.3743 77.2186C85.4681 77.6214 85.3984 78.0449 85.1805 78.3963C84.9626 78.7478 84.6143 78.9985 84.2118 79.0936L78.1275 80.5249C77.9277 80.5719 77.7207 80.5791 77.5181 80.546C77.3156 80.513 77.1216 80.4404 76.9471 80.3324C76.7726 80.2244 76.6211 80.083 76.5013 79.9165C76.3814 79.7499 76.2955 79.5614 76.2485 79.3616C76.2016 79.1619 76.1944 78.9548 76.2274 78.7523C76.2604 78.5497 76.333 78.3557 76.4411 78.1812C76.5491 78.0068 76.6904 77.8553 76.857 77.7354C77.0235 77.6156 77.2121 77.5297 77.4118 77.4827L82.0993 76.3889C81.8845 74.5495 82.3976 72.6989 83.529 71.2327C84.6603 69.7665 86.3202 68.8008 88.154 68.5421C89.911 67.9572 91.8271 68.0821 93.4933 68.8901C95.1595 69.6981 96.444 71.1253 97.0728 72.8671L101.76 71.7655C102.163 71.6718 102.587 71.7417 102.938 71.9599C103.29 72.1781 103.541 72.5268 103.635 72.9296L105.109 79.1968C105.202 79.5997 105.133 80.0234 104.914 80.3749C104.696 80.7264 104.347 80.977 103.945 81.0718C103.822 81.1 103.696 81.1141 103.57 81.1139Z"
      fill="#141414"
    />
    <path
      d="M92.2956 96.2015C90.7802 96.234 89.2967 95.7637 88.0769 94.864C86.9863 94.0165 86.1479 92.8874 85.6519 91.5984L80.9769 92.6921C80.5732 92.7853 80.149 92.7163 79.7956 92.4999C79.621 92.3918 79.4695 92.2503 79.3497 92.0835C79.2298 91.9167 79.144 91.728 79.0972 91.528L77.7503 85.803C77.6556 85.3994 77.7251 84.9747 77.9436 84.6223C78.1621 84.27 78.5115 84.0188 78.9152 83.9241C79.3188 83.8294 79.7435 83.899 80.0959 84.1174C80.4482 84.3359 80.6994 84.6854 80.7941 85.089L81.7816 89.2937L86.3441 88.2187C86.7468 88.1249 87.1703 88.1946 87.5218 88.4125C87.8732 88.6304 88.124 88.9787 88.2191 89.3812C88.4404 90.5428 89.0517 91.594 89.9519 92.3609C90.5234 92.7326 91.171 92.9714 91.847 93.0598C92.523 93.1482 93.2102 93.084 93.8581 92.8718C94.4938 92.8032 95.1055 92.5905 95.6465 92.2497C96.1876 91.909 96.6437 91.4493 96.9802 90.9056C97.3167 90.3619 97.5246 89.7486 97.5882 89.1124C97.6518 88.4762 97.5694 87.8338 97.3472 87.2343C97.2534 86.8313 97.3234 86.4076 97.5416 86.0561C97.7598 85.7046 98.1085 85.454 98.5112 85.3593L104.596 83.928C104.999 83.8331 105.424 83.9024 105.776 84.1206C106.128 84.3387 106.38 84.6879 106.475 85.0913C106.569 85.4947 106.5 85.9193 106.282 86.2717C106.064 86.6241 105.715 86.8753 105.311 86.9702L100.624 88.064C100.838 89.9036 100.325 91.7541 99.193 93.2203C98.0614 94.6865 96.4014 95.6521 94.5675 95.9109C93.8239 96.0947 93.0616 96.1922 92.2956 96.2015Z"
      fill="#141414"
    />
  </svg>
)

export default BoxReviewAvaliada
